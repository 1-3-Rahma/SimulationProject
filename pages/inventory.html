<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inventory Queue Simulation</title>
    <link rel="stylesheet" href="../css/main.css">
    <link rel="stylesheet" href="../css/simulation.css">
    <link rel="stylesheet" href="../css/inventory.css">
    <link rel="stylesheet" href="../css/multiLimitedCustomer.css">
</head>
<body>
    <div class="container inventory-container">
        <button class="btn back-btn" onclick="window.location.href='../index.html'">‚Üê Back to Main Menu</button>
        <h1>Inventory Queue Simulation</h1>

        <div id="errorBox" class="error hidden"></div>

        <div class="tabs-nav">
            <button class="tab-btn active" id="tabBtn1" onclick="goToStep(1)">Step 1 ‚Äî Basic Parameters</button>
            <button class="tab-btn" id="tabBtn2" onclick="goToStep(2)">Step 2 ‚Äî Distributions</button>
            <button class="tab-btn" id="tabBtn3" onclick="goToStep(3)">Step 3 ‚Äî Random Numbers</button>
            <button class="tab-btn" id="tabBtn4" onclick="goToStep(4)">Step 4 ‚Äî Results</button>
        </div>

        <!-- Step 1: Basic Inputs -->
        <div id="step1" class="tab-content active">
            <div class="tab-body">
                <h2>Step 1: Basic Parameters</h2>
                <div class="input-grid">
                    <div class="input-group">
                        <label>Standard Inventory Level (M):</label>
                        <input type="number" id="stdInventory" value="100" min="0" required>
                    </div>
                    <div class="input-group">
                        <label>Periodic Review Length (N days):</label>
                        <input type="number" id="reviewLength" value="5" min="1" required>
                    </div>
                    <div class="input-group">
                        <label>Number of Cycles:</label>
                        <input type="number" id="numCycles" value="3" min="1" required>
                    </div>
                    <div class="input-group">
                        <label>Starting Inventory:</label>
                        <input type="number" id="startInventory" value="80" min="0" required>
                    </div>
                </div>
                
                <h2>Pending Orders</h2>
                <div class="pending-orders-container">
                    <div id="pendingOrdersList"></div>
                    <button class="btn btn-secondary" onclick="addPendingOrder()">+ Add Pending Order</button>
                </div>

                <div class="nav-buttons">
                    <button class="btn" onclick="goToStep(2)">Next: Setup Tables</button>
                </div>
            </div>
        </div>

        <!-- Step 2: Demand and Lead Time Tables -->
        <div id="step2" class="tab-content">
            <div class="tab-body">
                <h2>Step 2: Demand Distribution</h2>
                <div class="table-controls">
                    <button class="btn btn-secondary" onclick="addDemandRow()">+ Add Row</button>
                    <input type="number" id="demandRowCount" min="1" max="100" value="1" placeholder="Rows" style="width: 80px; margin: 0 5px; padding: 5px;">
                    <button class="btn btn-secondary" onclick="addMultipleDemandRows()">Generate Rows</button>
                </div>
                <table id="demandTable">
                    <thead>
                        <tr>
                            <th>Demand</th>
                            <th>Probability</th>
                            <th>Cumulative Probability</th>
                            <th>Random-Digit Assignment</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody id="demandTableBody"></tbody>
                </table>

                <h2>Lead Time Distribution</h2>
                <div class="table-controls">
                    <button class="btn btn-secondary" onclick="addLeadTimeRow()">+ Add Row</button>
                    <input type="number" id="leadTimeRowCount" min="1" max="100" value="1" placeholder="Rows" style="width: 80px; margin: 0 5px; padding: 5px;">
                    <button class="btn btn-secondary" onclick="addMultipleLeadTimeRows()">Generate Rows</button>
                </div>
                <table id="leadTimeTable">
                    <thead>
                        <tr>
                            <th>Lead Time (days)</th>
                            <th>Probability</th>
                            <th>Cumulative Probability</th>
                            <th>Random-Digit Assignment</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody id="leadTimeTableBody"></tbody>
                </table>

                <div class="nav-buttons">
                    <button class="btn btn-secondary" onclick="goToStep(1)">Back</button>
                    <button class="btn" onclick="goToStep(3)">Next: Random Numbers</button>
                </div>
            </div>
        </div>

        <!-- Step 3: Random Numbers -->
        <div id="step3" class="tab-content">
            <div class="tab-body">
                <h2>Step 3: Random Numbers</h2>
<<<<<<< HEAD
                <p>Choose how to provide random numbers for each table: Manual Input, LCG method, or Mid-Square method</p>

                <div class="random-tables-container">
                    <!-- Demand Time Random Numbers Table -->
                    <div class="random-table-box">
                        <h4>Demand Random Numbers</h4>

                        <!-- Method Selection for Demand -->
                        <div class="method-selection">
                            <div class="method-tabs">
                                <button class="method-tab active" onclick="switchTableMethod('demand', 'manual')" id="demand-tab-manual">Manual Input</button>
                                <button class="method-tab" onclick="switchTableMethod('demand', 'lcg')" id="demand-tab-lcg">LCG Method</button>
                                <button class="method-tab" onclick="switchTableMethod('demand', 'midsquare')" id="demand-tab-midsquare">Mid-Square Method</button>
                            </div>
                        </div>

                        <!-- Manual Input for Demand -->
                        <div id="demand-manual-section" class="method-section active">
                            <div class="table-controls">
                                <button class="btn-add-row" onclick="addRandomNumberRow('demand')">Add Row</button>
                                <input type="number" id="demandManualRowCount" min="1" max="100" value="15" placeholder="Rows" style="width: 80px; margin: 0 5px; padding: 5px;">
                                <button class="btn btn-secondary" onclick="generateRandomNumberRows('demand')">Generate Rows</button>
                                <button class="btn btn-secondary" onclick="updateRandomNumberCounts()">Update Count</button>
                            </div>
                            <div class="table-container">
                                <table id="tableRnDemand" class="editable-table random-numbers-table">
                                    <thead>
                                        <tr>
                                            <th style="width: 50px;"></th>
                                            <th>Random Number</th>
                                        </tr>
                                    </thead>
                                    <tbody id="tbodyRnDemand">
                                        <tr>
                                            <td class="action-cell"><button class="btn-delete-row" onclick="deleteRandomNumberRow(this, 'demand')" title="Delete row">üóëÔ∏è</button></td>
                                            <td><input type="number" class="table-input" min="0" max="100" step="0.01" placeholder="0-100"></td>
                                        </tr>
                                        <tr>
                                            <td class="action-cell"><button class="btn-delete-row" onclick="deleteRandomNumberRow(this, 'demand')" title="Delete row">üóëÔ∏è</button></td>
                                            <td><input type="number" class="table-input" min="0" max="100" step="0.01" placeholder="0-100"></td>
                                        </tr>
                                        <tr>
                                            <td class="action-cell"><button class="btn-delete-row" onclick="deleteRandomNumberRow(this, 'demand')" title="Delete row">üóëÔ∏è</button></td>
                                            <td><input type="number" class="table-input" min="0" max="100" step="0.01" placeholder="0-100"></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <small id="demandCount">Count: 3 numbers</small>
                        </div>

                        <!-- LCG Parameters for Demand -->
                        <div id="demand-lcg-section" class="method-section">
                            <h5>LCG Parameters for Demand Numbers</h5>
                            <div class="params-grid">
                                <div class="input-group">
                                    <label>Multiplier (a):</label>
                                    <input type="number" id="demand-lcg-a" min="0" placeholder="e.g., 1664525">
                                </div>
                                <div class="input-group">
                                    <label>Increment (c):</label>
                                    <input type="number" id="demand-lcg-c" min="0" placeholder="e.g., 1013904223">
                                </div>
                                <div class="input-group">
                                    <label>Modulus (m):</label>
                                    <input type="number" id="demand-lcg-m" min="1" placeholder="e.g., 2^32">
                                </div>
                                <div class="input-group">
                                    <label>Initial Seed (Z‚ÇÄ):</label>
                                    <input type="number" id="demand-lcg-seed" min="0" placeholder="e.g., 12345">
                                </div>
                            </div>
                            <div class="input-group">
                                <label>Number of Random Numbers:</label>
                                <input type="number" id="demand-lcg-count" min="1" placeholder="e.g., 15">
                            </div>
                            <button class="btn btn-secondary" onclick="generateTableRandomNumbers('demand', 'lcg')">Generate Demand Numbers</button>
                        </div>

                        <!-- Mid-Square Parameters for Demand -->
                        <div id="demand-midsquare-section" class="method-section">
                            <h5>Mid-Square Parameters for Demand Numbers</h5>
                            <div class="input-group">
                                <label>Seed (4-digit, 1000-9999):</label>
                                <input type="number" id="demand-midsquare-seed" min="1000" max="9999" placeholder="e.g., 1234">
                            </div>
                            <div class="input-group">
                                <label>Number of Random Numbers:</label>
                                <input type="number" id="demand-midsquare-count" min="1" placeholder="e.g., 15">
                            </div>
                            <button class="btn btn-secondary" onclick="generateTableRandomNumbers('demand', 'midsquare')">Generate Demand Numbers</button>
                        </div>
                    </div>

                    <!-- Lead Time Random Numbers Table -->
                    <div class="random-table-box">
                        <h4>Lead Time Random Numbers</h4>

                        <!-- Method Selection for Lead Time -->
                        <div class="method-selection">
                            <div class="method-tabs">
                                <button class="method-tab active" onclick="switchTableMethod('leadtime', 'manual')" id="leadtime-tab-manual">Manual Input</button>
                                <button class="method-tab" onclick="switchTableMethod('leadtime', 'lcg')" id="leadtime-tab-lcg">LCG Method</button>
                                <button class="method-tab" onclick="switchTableMethod('leadtime', 'midsquare')" id="leadtime-tab-midsquare">Mid-Square Method</button>
                            </div>
                        </div>

                        <!-- Manual Input for Lead Time -->
                        <div id="leadtime-manual-section" class="method-section active">
                            <div class="table-controls">
                                <button class="btn-add-row" onclick="addRandomNumberRow('leadtime')">Add Row</button>
                                <input type="number" id="leadtimeManualRowCount" min="1" max="100" value="5" placeholder="Rows" style="width: 80px; margin: 0 5px; padding: 5px;">
                                <button class="btn btn-secondary" onclick="generateRandomNumberRows('leadtime')">Generate Rows</button>
                                <button class="btn btn-secondary" onclick="updateRandomNumberCounts()">Update Count</button>
                            </div>
                            <div class="table-container">
                                <table id="tableRnLeadTime" class="editable-table random-numbers-table">
                                    <thead>
                                        <tr>
                                            <th style="width: 50px;"></th>
                                            <th>Random Number</th>
                                        </tr>
                                    </thead>
                                    <tbody id="tbodyRnLeadTime">
                                        <tr>
                                            <td class="action-cell"><button class="btn-delete-row" onclick="deleteRandomNumberRow(this, 'leadtime')" title="Delete row">üóëÔ∏è</button></td>
                                            <td><input type="number" class="table-input" min="0" max="100" step="0.01" placeholder="0-100"></td>
                                        </tr>
                                        <tr>
                                            <td class="action-cell"><button class="btn-delete-row" onclick="deleteRandomNumberRow(this, 'leadtime')" title="Delete row">üóëÔ∏è</button></td>
                                            <td><input type="number" class="table-input" min="0" max="100" step="0.01" placeholder="0-100"></td>
                                        </tr>
                                        <tr>
                                            <td class="action-cell"><button class="btn-delete-row" onclick="deleteRandomNumberRow(this, 'leadtime')" title="Delete row">üóëÔ∏è</button></td>
                                            <td><input type="number" class="table-input" min="0" max="100" step="0.01" placeholder="0-100"></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <small id="leadtimeCount">Count: 3 numbers</small>
                        </div>

                        <!-- LCG Parameters for Lead Time -->
                        <div id="leadtime-lcg-section" class="method-section">
                            <h5>LCG Parameters for Lead Time Numbers</h5>
                            <div class="params-grid">
                                <div class="input-group">
                                    <label>Multiplier (a):</label>
                                    <input type="number" id="leadtime-lcg-a" min="0" placeholder="e.g., 1664525">
                                </div>
                                <div class="input-group">
                                    <label>Increment (c):</label>
                                    <input type="number" id="leadtime-lcg-c" min="0" placeholder="e.g., 1013904223">
                                </div>
                                <div class="input-group">
                                    <label>Modulus (m):</label>
                                    <input type="number" id="leadtime-lcg-m" min="1" placeholder="e.g., 2^32">
                                </div>
                                <div class="input-group">
                                    <label>Initial Seed (Z‚ÇÄ):</label>
                                    <input type="number" id="leadtime-lcg-seed" min="0" placeholder="e.g., 12345">
                                </div>
                            </div>
                            <div class="input-group">
                                <label>Number of Random Numbers:</label>
                                <input type="number" id="leadtime-lcg-count" min="1" placeholder="e.g., 5">
                            </div>
                            <button class="btn btn-secondary" onclick="generateTableRandomNumbers('leadtime', 'lcg')">Generate Lead Time Numbers</button>
                        </div>

                        <!-- Mid-Square Parameters for Lead Time -->
                        <div id="leadtime-midsquare-section" class="method-section">
                            <h5>Mid-Square Parameters for Lead Time Numbers</h5>
                            <div class="input-group">
                                <label>Seed (4-digit, 1000-9999):</label>
                                <input type="number" id="leadtime-midsquare-seed" min="1000" max="9999" placeholder="e.g., 1234">
                            </div>
                            <div class="input-group">
                                <label>Number of Random Numbers:</label>
                                <input type="number" id="leadtime-midsquare-count" min="1" placeholder="e.g., 5">
                            </div>
                            <button class="btn btn-secondary" onclick="generateTableRandomNumbers('leadtime', 'midsquare')">Generate Lead Time Numbers</button>
                        </div>
                    </div>
                </div>

                <!-- Hidden textareas for backward compatibility -->
                <textarea id="txtRnDemand" style="display: none;"></textarea>
                <textarea id="txtRnLeadTime" style="display: none;"></textarea>
=======
                <p>Choose how to provide random numbers: Manual Input or Generated (LCG/Mid-Square)</p>
                
                <!-- Random Number Method Selection -->
                <div class="random-method-selector">
                    <div class="method-tabs">
                        <button class="method-tab active" onclick="switchRandomMethod('manual')" id="tabManual">Manual Input</button>
                        <button class="method-tab" onclick="switchRandomMethod('generated')" id="tabGenerated">Generated</button>
                    </div>
                    
                    <!-- Manual Input Section -->
                    <div id="manualSection" class="method-section active">
                        <h3>Manual Random Number Input</h3>
                        <p id="manualInputDescription">Enter random numbers directly in the table cells. The valid range depends on your probability distribution decimal places.</p>
                        
                        <div class="random-tables-container">
                            <div class="random-table-box">
                                <h4>Demand Random Numbers</h4>
                                <div class="table-controls">
                                    <button class="btn-add-row" onclick="addRandomNumberRow('demand')">Add Row</button>
                                    <input type="number" id="randomDemandRowCount" min="1" max="100" value="5" placeholder="Rows" style="width: 80px; margin: 0 5px; padding: 5px;">
                                    <button class="btn btn-secondary" onclick="generateRandomNumberRows('demand')">Generate Rows</button>
                                    <button class="btn btn-secondary" onclick="updateRandomNumberCounts()">Update Count</button>
                                </div>
                                <div class="table-container">
                                    <table id="tableRnDemand" class="editable-table random-numbers-table">
                                        <thead>
                                            <tr>
                                                <th style="width: 50px;"></th>
                                                <th>Random Number</th>
                                            </tr>
                                        </thead>
                                        <tbody id="tbodyRnDemand">
                                            <tr>
                                                <td class="action-cell"><button class="btn-delete-row" onclick="deleteRandomNumberRow(this, 'demand')" title="Delete row">üóëÔ∏è</button></td>
                                                <td><input type="number" class="table-input" min="0" placeholder="Enter number" onchange="updateRandomNumberCounts()"></td>
                                            </tr>
                                            <tr>
                                                <td class="action-cell"><button class="btn-delete-row" onclick="deleteRandomNumberRow(this, 'demand')" title="Delete row">üóëÔ∏è</button></td>
                                                <td><input type="number" class="table-input" min="0" placeholder="Enter number" onchange="updateRandomNumberCounts()"></td>
                                            </tr>
                                            <tr>
                                                <td class="action-cell"><button class="btn-delete-row" onclick="deleteRandomNumberRow(this, 'demand')" title="Delete row">üóëÔ∏è</button></td>
                                                <td><input type="number" class="table-input" min="0" placeholder="Enter number" onchange="updateRandomNumberCounts()"></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <small id="demandCount">Count: 3 numbers</small>
                            </div>
                            
                            <div class="random-table-box">
                                <h4>Lead Time Random Numbers</h4>
                                <div class="table-controls">
                                    <button class="btn-add-row" onclick="addRandomNumberRow('leadTime')">Add Row</button>
                                    <input type="number" id="randomLeadTimeRowCount" min="1" max="100" value="5" placeholder="Rows" style="width: 80px; margin: 0 5px; padding: 5px;">
                                    <button class="btn btn-secondary" onclick="generateRandomNumberRows('leadTime')">Generate Rows</button>
                                    <button class="btn btn-secondary" onclick="updateRandomNumberCounts()">Update Count</button>
                                </div>
                                <div class="table-container">
                                    <table id="tableRnLeadTime" class="editable-table random-numbers-table">
                                        <thead>
                                            <tr>
                                                <th style="width: 50px;"></th>
                                                <th>Random Number</th>
                                            </tr>
                                        </thead>
                                        <tbody id="tbodyRnLeadTime">
                                            <tr>
                                                <td class="action-cell"><button class="btn-delete-row" onclick="deleteRandomNumberRow(this, 'leadTime')" title="Delete row">üóëÔ∏è</button></td>
                                                <td><input type="number" class="table-input" min="0" placeholder="Enter number" onchange="updateRandomNumberCounts()"></td>
                                            </tr>
                                            <tr>
                                                <td class="action-cell"><button class="btn-delete-row" onclick="deleteRandomNumberRow(this, 'leadTime')" title="Delete row">üóëÔ∏è</button></td>
                                                <td><input type="number" class="table-input" min="0" placeholder="Enter number" onchange="updateRandomNumberCounts()"></td>
                                            </tr>
                                            <tr>
                                                <td class="action-cell"><button class="btn-delete-row" onclick="deleteRandomNumberRow(this, 'leadTime')" title="Delete row">üóëÔ∏è</button></td>
                                                <td><input type="number" class="table-input" min="0" placeholder="Enter number" onchange="updateRandomNumberCounts()"></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <small id="leadTimeCount">Count: 3 numbers</small>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Generated Section -->
                    <div id="generatedSection" class="method-section">
                        <h3>Generate Random Numbers</h3>
                        <p>Choose a generation method and parameters</p>
                        
                        <div class="generation-method-selector">
                            <label class="radio-label">
                                <input type="radio" name="genMethod" value="LCG" checked onchange="switchGenMethod('LCG')">
                                <span>Linear Congruential Generator (LCG)</span>
                            </label>
                            <label class="radio-label">
                                <input type="radio" name="genMethod" value="MidSquare" onchange="switchGenMethod('MidSquare')">
                                <span>Mid-Square Method</span>
                            </label>
                        </div>
                        
                        <!-- LCG Parameters -->
                        <div id="lcgParams" class="gen-params">
                            <h4>LCG Parameters</h4>
                            <div class="params-grid">
                                <div class="input-group">
                                    <label>Multiplier (a):</label>
                                    <input type="number" id="lcgA" min="0" placeholder="e.g., 1664525">
                                </div>
                                <div class="input-group">
                                    <label>Increment (c):</label>
                                    <input type="number" id="lcgC" min="0" placeholder="e.g., 1013904223">
                                </div>
                                <div class="input-group">
                                    <label>Modulus (m):</label>
                                    <input type="number" id="lcgM" min="1" placeholder="e.g., 2^32">
                                </div>
                                <div class="input-group">
                                    <label>Initial Seed (Z‚ÇÄ):</label>
                                    <input type="number" id="lcgSeed" min="0" placeholder="e.g., 12345">
                                </div>
                            </div>
                        </div>
                        
                        <!-- Mid-Square Parameters -->
                        <div id="midSquareParams" class="gen-params hidden">
                            <h4>Mid-Square Parameters</h4>
                            <div class="input-group">
                                <label>Seed (4-digit, 1000-9999):</label>
                                <input type="number" id="midSquareSeed" min="1000" max="9999" placeholder="e.g., 1234">
                            </div>
                        </div>
                        
                        <div class="input-group">
                            <label>Number of Demand Random Numbers:</label>
                            <input type="number" id="genDemandCount" min="1" placeholder="e.g., 15">
                        </div>
                        
                        <div class="input-group">
                            <label>Number of Lead Time Random Numbers:</label>
                            <input type="number" id="genLeadTimeCount" min="1" placeholder="e.g., 5">
                        </div>
                        
                        <button class="btn btn-secondary" onclick="generateRandomNumbers()">Generate Random Numbers</button>
                        
                        <div id="generatedResults" class="generated-results hidden">
                            <h4>Generated Numbers</h4>
                            <div class="results-display">
                                <div>
                                    <strong>Demand Numbers:</strong>
                                    <div id="genDemandPreview" class="random-preview"></div>
                                </div>
                                <div>
                                    <strong>Lead Time Numbers:</strong>
                                    <div id="genLeadTimePreview" class="random-preview"></div>
                                </div>
                            </div>
                            <button class="btn btn-secondary" onclick="useGeneratedNumbers()">Use These Numbers</button>
                        </div>
                    </div>
                </div>
>>>>>>> 93521e0d32dbbfa1840e9c9677016eb6f5b0355d

                <div class="nav-buttons">
                    <button class="btn btn-secondary" onclick="goToStep(2)">Back</button>
                    <button class="btn btn-primary" onclick="runSimulation()">Run Simulation</button>
                </div>
            </div>
        </div>

        <!-- Step 4: Simulation Results -->
        <div id="step4" class="tab-content">
            <div class="tab-body">
                <h2>Step 4: Simulation Results</h2>

                <div id="resultsExport">
                    <div id="distributionResults" class="table-container"></div>
                    <div class="simulation-table-container table-container" id="resultsReport">
                        <h3>Simulation Tables</h3>
                        <table id="simulationTable">
                            <thead>
                                <tr>
                                    <th>Cycle</th>
                                    <th>Day</th>
                                    <th>Beginning Inventory</th>
                                    <th>Random Digit (Demand)</th>
                                    <th>Demand</th>
                                    <th>Ending Inventory</th>
                                    <th>Shortage Quantity</th>
                                    <th>Order Quantity</th>
                                    <th>Random Digit (Lead Time)</th>
                                    <th>Days Until Arrival</th>
                                </tr>
                            </thead>
                            <tbody id="simulationTableBody"></tbody>
                        </table>
                    </div>


                    <div id="performanceMeasurements" class="performance-container"></div>
                </div>

                <div class="button-group">
                    <button class="btn btn-secondary" onclick="goToStep(3)">Back</button>
                    <button class="btn btn-secondary" onclick="resetInventory()">Start Over</button>
                    <button class="btn btn-primary" onclick="downloadInventoryPDF()">Download PDF</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="../js/randomNumbers.js"></script>
    <script src="../js/inventory.js"></script>
</body>
</html>


